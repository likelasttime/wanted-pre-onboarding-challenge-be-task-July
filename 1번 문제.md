## 동시성 제어

### 1. synchronized 키워드 사용 
- 단일 서버일 때만 사용 가능
- 실무에서 거의 사용하지 않음

### 2. 데이터베이스 이용
별도의 비용없이 사용가능하지만 Redis보다 성능이 좋지않다.
1. **Pessimistic Lock 활용** 
  - 데이터에 Lock을 걸어서 정합성을 맞춘다.
  - exclusive lock을 걸면 다른 트랜잭션에서는 lock이 해제되기 전에 데이터를 가져갈 수 없다.
  - 데드락이 걸릴 수 있으니 주의한다.  
2. **Optimistic Lock 활용**
  - 먼저 데이터를 읽은 후에 update를 수행할 때 내가 읽은 버전과 동일한지 확인하며 업데이트  
3. **Named Lock 활용**
- 이름을 가진 lock을 획득한 후 해제할 때까지 다른 세션은 이 lock을 획득 불가
- 별도의 명령어로 lock을 해제해주거나 선점시간이 끝나야 해제된다.

### 3. Redis 이용
별도의 구축비용과 인프라 관리비용이 들어간다.
데이터베이스를 이용한 방법보다 성능이 좋다.
- **Lettuce를 작성**
  - 간단한 구현
  - spin lock 방식
  - 재시도가 필요하지 않은 lock은 lettuce를 활용
- **Redisson을 활용**
  - pub-sub 방식으로 구현됨
  - Lettuce와 비교했을 때 redis에 부하가 덜 간다.
  - 재시도가 필요한 경우에는 redisson을 활용

